<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chick Hops</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        canvas {
            display: block;
            margin: 20px auto;
            background: white;
            border: 1px solid black;
        }
        #startScreen, #gameOverScreen, #welcomeBack {
            text-align: center;
        }
        #startButton, #restartButton {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            font-size: 18px;
        }
        #gameOverScreen, #gameCanvas {
            display: none;
        }
        #scoreboard {
            text-align: center; 
            font-size: 20px; 
            display: none;
        }
        h1, h2 {
            margin: 0;
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div id="startScreen">
        <h1>Chick Hops</h1>
        <input id="usernameInput" type="text" placeholder="Enter Username" />
        <button id="startButton">Start Game</button>
    </div>

    <!-- Welcome Back Message -->
    <div id="welcomeBack" style="display: none;">
        <h2>Welcome Back, <span id="welcomeUsername"></span>!</h2>
        <button id="startGameButton">Start Game</button>
    </div>

    <!-- Game Canvas -->
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    
    <!-- Game Over Screen -->
    <div id="gameOverScreen">
        <h2>Game Over</h2>
        <div id="finalScore"></div>
        <div id="quote"></div>
        <button id="restartButton">Restart Game</button>
    </div>

    <div id="scoreboard"></div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        let chick = {
            x: 50,
            y: canvas.height - 50,
            width: 30,
            height: 30,
            velocityY: 0,
            gravity: 0.5,
            isJumping: false,
        };

        let fences = [];
        let score = 0;
        let isGameOver = false;
        let username = localStorage.getItem('username') || '';

        function startGame() {
            if (!username) {
                username = document.getElementById('usernameInput').value;
                if (!username) {
                    alert('Please enter a username');
                    return;
                }
                localStorage.setItem('username', username);
            }

            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('welcomeBack').style.display = 'none';
            document.getElementById('gameOverScreen').style.display = 'none';
            canvas.style.display = 'block';
            document.getElementById('scoreboard').style.display = 'block';

            score = 0;
            isGameOver = false;
            chick.y = canvas.height - 50;
            chick.velocityY = 0;
            chick.isJumping = false;
            fences = [];
            document.getElementById('scoreboard').innerHTML = `Score: ${score}`;
            gameLoop();
        }

        // Display welcome back message if username exists
        if (username) {
            document.getElementById('welcomeUsername').innerText = username;
            document.getElementById('welcomeBack').style.display = 'block';
            document.getElementById('startGameButton').addEventListener('click', startGame);
        } else {
            document.getElementById('startButton').addEventListener('click', startGame);
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawChick();
            drawFences();
            updateChick();
            updateFences();
            checkCollision();
            if (!isGameOver) {
                requestAnimationFrame(gameLoop);
            } else {
                showGameOver();
            }
        }

        function drawChick() {
            ctx.fillStyle = "yellow"; // Chick's color (body)
            ctx.beginPath();
            ctx.ellipse(chick.x + 15, chick.y + 20, 15, 20, 0, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = "orange"; // Chick's beak
            ctx.beginPath();
            ctx.moveTo(chick.x + 25, chick.y + 10);
            ctx.lineTo(chick.x + 35, chick.y + 15);
            ctx.lineTo(chick.x + 25, chick.y + 20);
            ctx.fill();

            ctx.fillStyle = "black"; // Chick's eye
            ctx.beginPath();
            ctx.arc(chick.x + 10, chick.y + 10, 2, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = "orange"; // Chick's legs
            ctx.fillRect(chick.x + 5, chick.y + 30, 5, 10);
            ctx.fillRect(chick.x + 15, chick.y + 30, 5, 10);
        }

        function updateChick() {
            chick.velocityY += chick.gravity;
            chick.y += chick.velocityY;

            // Prevent chick from falling below the ground
            if (chick.y + chick.height >= canvas.height) {
                chick.y = canvas.height - chick.height;
                chick.isJumping = false; // Reset jumping status
            }
        }

        function drawFences() {
            for (let fence of fences) {
                ctx.fillStyle = "brown";
                ctx.fillRect(fence.x, fence.y, 20, fence.height);
            }
        }

        function updateFences() {
            if (Math.random() < 0.02) { // Adjust spawn rate as necessary
                let fenceHeight = 30;
                fences.push({ x: canvas.width, y: canvas.height - fenceHeight, height: fenceHeight });
            }

            for (let i = fences.length - 1; i >= 0; i--) {
                fences[i].x -= 3;
                if (fences[i].x + 20 < 0) {
                    fences.splice(i, 1);
                    score++;
                    document.getElementById('scoreboard').innerHTML = `Score: ${score}`;
                }
            }
        }

        function checkCollision() {
            for (let fence of fences) {
                if (chick.x + chick.width > fence.x && chick.x < fence.x + 20 && 
                    chick.y + chick.height > fence.y) {
                    isGameOver = true;
                }
            }
        }

        function showGameOver() {
            canvas.style.display = 'none';
            document.getElementById('gameOverScreen').style.display = 'block';
            document.getElementById('finalScore').innerHTML = `Final Score: ${score}`;

            // Display random quote based on score
            let quote;
            if (score < 10) {
                const negativeQuotes = [
                    "Pretty suck!",
                    "You need to touch some grass!",
                    "Really, below 10?",
                    "You need to quit!",
                    "Get some new glasses.",
                    "My dog is better than you.",
                    "It's not even that hard.",
                    "Skill Issue",
                    "You Monster! The chick died!",
                    "Is that it?"
                ];
                quote = negativeQuotes[Math.floor(Math.random() * negativeQuotes.length)];
            } else if (score < 30) {
                const averageQuotes = [
                    "You're really working that hard?",
                    "You can still try... If you can.",
                    "Well... I can see you're doing great.",
                    "Is it challenging?",
                    "Oh! I see."
                ];
                quote = averageQuotes[Math.floor(Math.random() * averageQuotes.length)];
            } else {
                const positiveQuotes = [
                    "Amazing!",
                    "I can't believe you managed to get here?",
                    "Outstanding!",
                    "You made the chick so proud.",
                    "You're Awesome!",
                    "You crashed this game!",
                    "That's the skill!!!",
                    "Well done!",
                    "Great job!",
                    "Huge Congrats!!!"
                ];
                quote = positiveQuotes[Math.floor(Math.random() * positiveQuotes.length)];
            }
            document.getElementById('quote').innerHTML = quote;
        }

        canvas.addEventListener('click', () => {
            if (!chick.isJumping) {
                chick.velocityY = -10;
                chick.isJumping = true;
            }
        });

        document.getElementById('restartButton').addEventListener('click', startGame);
    </script>
</body>
</html>
